<div class="container py-5">

    <h3>Home Page</h3>

    <div class="alert bg-warning p-5" *ngIf="offline">Attention, vous êtes actuellement hor ligne</div>
    <div class="card my-3" *ngIf="newNotification">
        <div class="card-header">
            {{newNotification.title}}
        </div>
        <img class="card-img-top" src="{{newNotification.image}}" alt="{{newNotification.title}}">
        <div class="card-body">
            <p class="card-text">{{newNotification.body}}</p>
        </div>
    </div>

    <p class="alert bg-success p-2 mt-3 fs-5">Me sert pour le moment à tester l'authentification utilisateur, la récupération des sigles métiers pour boucler dessus et afficher chaque zone. Zones qui seront éditables pour le seul utilisateur ayant le role d'éditeur !!</p>

    <!-- <div class="p-2 display-5">Données récupérées non pas grâce à un paramètre de route mais grâce aux données
        d'authentification de l'utilisateur</div> -->

    <div *ngIf="user" class="alert bg-light p-2">
        Id Utilisateur authentifié sur firebase Auth : {{user | json}}
    </div>

    <!-- <div *ngIf="userData" class="rounded bg-light p-2">
        <ul class="list-group">
            <li class="list-group-item">Son id sur firestore : {{userData.id}}</li>
            <li class="list-group-item">Son email sur firestore : {{userData.email}}</li>
            <li class="list-group-item">Son status sur firestore : {{userData.status}}</li>
            <li class="list-group-item">Son prénom sur firestore : {{userData.firstName}}</li>
            <li class="list-group-item">Son nom sur firestore : {{userData.lastName}}</li>
            <li class="list-group-item">Date d'enregistrement sur firestore : {{userData.created | date:'dd/MM/yyyy' }}
            </li>
            <li *ngIf="userData.sigle" class="list-group-item">Sigle métier si existant: {{userData.sigle}}</li>
        </ul>
    </div> -->

    <div *ngIf="tradesData" class="rounded bg-light row column-gap-1">

        <div class="col-6" *ngFor="let trade of tradesData">
            <div class="card my-3">
                <div class="card-body">
                    <!-- <h4 class="card-title">id : {{student.id}}</h4> -->
                    <!-- <p class="card-text"><span class="fw-bold">Son sigle (référence métier) sur firestore : </span> : {{trade.sigle}}</p> -->
                    <p class="card-text"><span class="fw-bold">Dénomination: </span> : {{trade.denomination}}</p>
                    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit...</p>
                    <div *ngIf="isEditor=='editor'" class="d-flex justify-content-end"><button class="btn btn-transparent"><i class="bi bi-pencil-square"></i>
                            Editer</button></div>
    
                    <!-- à tester : (str.length>6)? (str | slice:0:6)+'...':(str) -->
                </div>
                <div class="card-footer text-muted">Réf. {{trade.sigle}}</div>
            </div>
        </div>
    </div>

    <button class="btn btn-primary mt-4" (click)="notifyMe()">Accepter les notifications</button>

</div>